import java.util.ArrayList;

public class Block {

	
	private int blockID;
	private int nonce;
	private ArrayList<Transaction> transactionList;
	private String previousBlockHash;
	
	public String getPreviousBlockHash() {
		return previousBlockHash;
	}
	public void setPreviousBlockHash(String previousBlockHash) {
		this.previousBlockHash = previousBlockHash;
	}
	public int getBlockID() {
		return blockID;
	}
	public void setBlockID(int blockID) {
		this.blockID = blockID;
	}
	public int getNonce() {
		return nonce;
	}
	public void setNonce(int nonce) {
		this.nonce = nonce;
	}

	public void addTransaction(Transaction transaction) {
		transactionList.add(transaction);
	}
	public Block(int blockID,String previousBlockHash, int nonce, ArrayList transactionList) {
		
		this.blockID = blockID;
		this.previousBlockHash=previousBlockHash;
		this.nonce = nonce;
		this.transactionList=transactionList;
	}
	public String getBlockHash() {
		String transactionInformations="";
		for(int i=0;i<transactionList.size();i++) {
			transactionInformations+=transactionList.get(i).getInformation();
		}
		return Util.getHash(nonce+data+this.getPreviousBlockHash());
	}
	
	public void mine() {
		while(true) {
			if(this.getBlockHash().substring(0,4).equals("0000")) {
				System.out.println(blockID+"번째 블록 채굴 성공");break;
			}nonce++;
		}
		
		
		
	}
	public void getinfo() {
		System.out.println("------------------------------------------------");
		System.out.println("블록 번호 : "+ this.getBlockID());

		System.out.println("이전 블록 해시 : "+ this.getPreviousBlockHash());
		System.out.println("채굴 변수 값 : "+ this.getNonce());
		System.out.println("트랜잭션 개수 : "+ transactionList.size()+"개");
		for(int i=0;i<transactionList.size();i++) {
			System.out.println(transactionList.get(i).getinfo());
			
		}
		System.out.println("블록 해시 : "+ this.getBlockHash());
		
		System.out.println("------------------------------------------------");
	}

	
	
	
}
